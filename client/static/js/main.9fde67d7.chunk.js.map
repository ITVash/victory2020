{"version":3,"sources":["core/axios.js","serviceWorker.js","api/auth.js","api/notification.js","redux/actions/auth.js","redux/actions/notification.js","components/Loading/index.jsx","components/Register/index.jsx","components/Login/index.jsx","utils/generateAvatar.js","components/AuthInfo/index.jsx","components/Table/index.jsx","containers/Register/index.js","containers/Login/index.js","pages/Auth/index.jsx","pages/Home/index.jsx","App.js","subscribe.js","redux/reducer/auth.js","redux/reducer/index.js","redux/store.js","index.js"],"names":["token","localStorage","axios","defaults","headers","common","baseURL","window","defenderPrompt","data","post","actions","isLoading","load","type","payload","_login","_logout","logout","dispatch","a","async","removeItem","console","error","register","auth","reg","log","login","obj","firstName","lastName","access","smena","setItem","sendMessages","notification","send","err","Loading","icon","style","fontSize","spin","className","indicator","tip","Form","create","name","props","getFieldDecorator","form","useState","confirmDirty","setConfirmDirty","handleClick","loading","history","useHistory","onSubmit","e","preventDefault","validateFieldsAndScroll","values","resetFields","push","Item","label","title","rules","message","required","whitespace","hasFeedback","validator","rule","value","callback","validateFields","force","Password","getFieldValue","onBlur","target","htmlType","block","handleLogin","prefix","color","placeholder","to","generateAvatar","first","last","firstHash","lastHash","firstColor","lastColor","length","i","charCodeAt","toString","substr","AuthInfo","menu","key","href","Divider","onClick","body","background","overlay","trigger","dayMonth","Date","Table","days","d","getFullYear","getMonth","getDate","dayIsMonth","tableUser","toDay","index","dataIndex","width","day","column","fixed","align","children","FL","1","2","10","columns","dataSource","bordered","scroll","x","y","connect","Auth","AuthAction","phone","password","md5","items","NotifiAction","exact","path","render","isLocalhost","Boolean","location","hostname","match","addEventListener","platforms","showWindowInstall","installWindow","document","querySelector","installBtn","display","installApp","prompt","userChoice","then","choice","outcome","alert","registerValidSW","swUrl","config","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","convertVapidKey","base64String","base64","repeat","replace","rawData","atob","outputArray","Uint8Array","urlBase64ToUint8Array","process","sendSubscribe","subscribe","fetch","method","JSON","stringify","initialState","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","middleware","thunk","store","createStore","rootReducer","applyMiddleware","getItem","dec","jwtDecode","exp","now","user","ReactDOM","getElementById","URL","origin","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","pushManager","getSubscription","existedSubscribe","applicationServerKey","userVisibleOnly","newSubscribe","Notification","permission","subscribeUser"],"mappings":"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","file":"static/js/main.9fde67d7.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst token = localStorage.token;\r\n\r\ntoken && (axios.defaults.headers.common['Authorization'] = `Bearer ${token}`)\r\naxios.defaults.baseURL = 'https://us-central1-donbassoperaserve.cloudfunctions.net/api'\r\naxios.defaults.headers.common['Content-Type'] = 'application/json; charset=UTF-8'\r\naxios.defaults.headers.common['Accept'] = 'application/json'\r\nwindow.axios = axios\r\n\r\nexport default axios","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swFileName = process.env.NODE_ENV === 'production' ? 'service-worker.js' : 'sw.js'\n      const swUrl = `${process.env.PUBLIC_URL}/${swFileName}`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nlet defenderPrompt\nwindow.addEventListener('beforeinstallprompt', e => {\n  e.preventDefault()\n  console.log('platform', e.platforms)\n  defenderPrompt = e\n  showWindowInstall()\n\n})\n\nconst showWindowInstall = () => {\n  const installWindow = document.querySelector('.install')\n  const installBtn = document.querySelector('.install button')\n  installWindow.style.display = 'block'\n  installBtn.addEventListener('click', installApp)\n}\n\nconst installApp = () => {\n  const installWindow = document.querySelector('.install')\n  installWindow.style.display = 'none'\n  defenderPrompt.prompt()\n  defenderPrompt.userChoice\n    .then(choice => {\n      if (choice.outcome == 'accepted') {\n        alert('Приложение установлено')\n      } else {\n        alert('Не удается установить приложение')\n      }\n      defenderPrompt = null\n    })\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { axios } from '../core'\r\n\r\nexport default {\r\n  register: data => axios.post('auth', data),\r\n  login: data => axios.post('getMe',data)\r\n}","import { axios } from '../core'\r\n\r\nexport default {\r\n  send: data => axios.post(`notifications/send`, data)\r\n}","import { auth } from '../../api'\r\n\r\nconst actions = {\r\n  isLoading: load => ({\r\n    type: 'AUTH:IS_LOADING',\r\n    payload: load\r\n  }),\r\n  _login: data => ({\r\n    type: 'AUTH:LOGIN',\r\n    payload: data\r\n  }),\r\n  _logout: () => ({\r\n    type: 'AUTH:LOGOUT',\r\n  }),\r\n  logout: () => async dispatch => {\r\n    await dispatch(actions.isLoading(true))\r\n    localStorage.removeItem('token')\r\n    await dispatch(actions._logout())\r\n    try {\r\n      await dispatch(actions.isLoading(false))\r\n    } catch (err) {\r\n      console.error(`Ошибка при выходе!`, err)\r\n    }\r\n  },\r\n  register: data => async dispatch => {\r\n    await dispatch(actions.isLoading(true))\r\n    try {\r\n      const reg = await auth.register(data)\r\n      await dispatch(actions.isLoading(false))\r\n      console.log('Ответ от сервера', reg)\r\n      return true\r\n    } catch (err) {\r\n      console.error(`Что-то пошло не так: ${err}`)\r\n      return false\r\n    }\r\n  },\r\n  login: data => async dispatch => {\r\n    await dispatch(actions.isLoading(true))\r\n    try {\r\n      const login = await auth.login(data)\r\n      const log = await login.data\r\n      const obj = {\r\n        login: log.login,\r\n        firstName: log.firstName,\r\n        lastName: log.lastName,\r\n        access: log.access,\r\n        smena: log.smena\r\n      }\r\n      localStorage.setItem('token', log.token)\r\n      await dispatch(actions._login(obj))\r\n      await dispatch(actions.isLoading(false))\r\n      return true\r\n    } catch (err) {\r\n      await dispatch(actions.isLoading(false))\r\n      console.error(`Ошибка запросов ${err}`)\r\n      return false\r\n    }\r\n  },\r\n\r\n}\r\n\r\nexport default actions","import { notification } from '../../api'\r\n\r\nconst actions = {\r\n  sendMessages: async data => {\r\n    const send = await notification.send(data)\r\n    try {\r\n      console.log('Сообщения успешно доставлены!', send)\r\n    } catch (err) {\r\n      console.error(`Ошибка при отправке запросса!!!`, err)\r\n    }\r\n  }\r\n}\r\n\r\nexport default actions","import React from 'react'\r\nimport { Spin, Icon } from 'antd'\r\n\r\nimport './style.scss'\r\n\r\nconst Loading = () => {\r\n  const icon = <Icon type=\"loading\" style={{fontSize: 24}} spin />\r\n  return (\r\n    <div className=\"loading\">\r\n      <div className=\"loading__body\">\r\n        <Spin indicator={icon} tip=\"Загрузка...\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Loading\r\n","import React, { useState } from \"react\"\r\nimport PropTypes from \"prop-types\"\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport { Form, Input, Tooltip, Icon, Button } from \"antd\"\r\n\r\nimport Loading from \"../Loading\"\r\n\r\nimport \"./style.scss\"\r\n\r\nconst Register = props => {\r\n\tconst { getFieldDecorator } = props.form;\r\n\tconst [confirmDirty, setConfirmDirty] = useState();\r\n\tconst { handleClick, loading } = props;\r\n\tconst history = useHistory()\r\n\tconst handle = e => {\r\n\t\te.preventDefault()\t\t\r\n\t\tprops.form.validateFieldsAndScroll((err, values) => {\r\n\t\t\tif (!err) {\r\n\t\t\t\thandleClick(values);\r\n\t\t\t\tif (!loading) {\r\n\t\t\t\t\tprops.form.resetFields()\r\n\t\t\t\t\thistory.push(\"/\")\r\n\t\t\t\t}\r\n\t\t\t} else console.error(`Ошибка регистрации!!!`)\r\n\t\t});\r\n\t};\r\n\tconst validateToNextPassword = (rule, value, callback) => {\r\n\t\tconst { form } = props\r\n\t\tif (value && confirmDirty) {\r\n\t\t\tform.validateFields([\"confirm\"], { force: true })\r\n\t\t}\r\n\t\tcallback()\r\n\t};\r\n\tconst compareToFirstPassword = (rule, value, callback) => {\r\n\t\tconst { form } = props\r\n\t\tif (value && value !== form.getFieldValue(\"password\")) {\r\n\t\t\tcallback(\"Оба пароля не совпадают\")\r\n\t\t} else {\r\n\t\t\tcallback()\r\n\t\t}\r\n\t};\r\n\tconst handleConfirmBlur = e => {\r\n\t\tconst { value } = e.target\r\n\t\tsetConfirmDirty({ confirmDirty: confirmDirty || !!value })\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{loading && <Loading />}\r\n\t\t\t<div className='register'>\r\n\t\t\t\t<h3>Регистрация пользователя</h3>\r\n\t\t\t\t<Form onSubmit={handle}>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\tЛогин&nbsp;\r\n\t\t\t\t\t\t\t\t<Tooltip title='Логин необходим для входа в приложение'>\r\n\t\t\t\t\t\t\t\t\t<Icon type='info-circle' />\r\n\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t{getFieldDecorator(\"login\", {\r\n\t\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t//type: 'text',\r\n\t\t\t\t\t\t\t\t\tmessage: \"Логин обязателен для заполнения\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: \"Введите логин\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t})(<Input />)}\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\tИмя&nbsp;\r\n\t\t\t\t\t\t\t\t<Tooltip title='Укажите Ваше реальное имя'>\r\n\t\t\t\t\t\t\t\t\t<Icon type='info-circle' />\r\n\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t{getFieldDecorator(\"firstName\", {\r\n\t\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: \"Укажите свое имя!\",\r\n\t\t\t\t\t\t\t\t\twhitespace: true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t})(<Input />)}\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\tФамилия&nbsp;\r\n\t\t\t\t\t\t\t\t<Tooltip title='Укажите Вашу реальную фамилию'>\r\n\t\t\t\t\t\t\t\t\t<Icon type='info-circle' />\r\n\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t{getFieldDecorator(\"lastName\", {\r\n\t\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: \"Укажите свою фамилию!\",\r\n\t\t\t\t\t\t\t\t\twhitespace: true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t})(<Input />)}\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\tТелефон&nbsp;\r\n\t\t\t\t\t\t\t\t<Tooltip title='Укажите свой телефон в формате +380719876543'>\r\n\t\t\t\t\t\t\t\t\t<Icon type='info-circle' />\r\n\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t{getFieldDecorator(\"phone\", {\r\n\t\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: \"Укажите Ваш телефон!\",\r\n\t\t\t\t\t\t\t\t\twhitespace: true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t})(<Input />)}\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item label='Пароль' hasFeedback>\r\n\t\t\t\t\t\t{getFieldDecorator(\"password\", {\r\n\t\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: \"Введите пароль!\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvalidator: validateToNextPassword,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t})(<Input.Password />)}\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item label='Подтвердите пароль' hasFeedback>\r\n\t\t\t\t\t\t{getFieldDecorator(\"confirm\", {\r\n\t\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: \"Подтвердите пароль!\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvalidator: compareToFirstPassword,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t})(<Input.Password onBlur={handleConfirmBlur} />)}\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t<Button type='primary' htmlType='submit' block>\r\n\t\t\t\t\t\t\tРегистрация\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nRegister.propTypes = {\r\n\thandleClick: PropTypes.func,\r\n\tloading: PropTypes.bool,\r\n};\r\n\r\nexport default Form.create({ name: \"register\" })(Register);\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Form, Icon, Input, Button } from 'antd'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Loading from '../Loading'\r\n\r\nimport './style.scss'\r\n\r\nconst Login = props => {\r\n  const { handleLogin, loading } = props\r\n  const { getFieldDecorator } = props.form\r\n  const handleSubmit = e => {\r\n    e.preventDefault()\r\n    props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        handleLogin(values)\r\n      }\r\n    })\r\n  }\r\n  return (\r\n    <>\r\n      {loading && <Loading />}\r\n\t\t\t<Form onSubmit={handleSubmit} className='login-form login'>\r\n\t\t\t\t<Form.Item>\r\n\t\t\t\t\t{getFieldDecorator(\"login\", {\r\n\t\t\t\t\t\trules: [{ required: true, message: \"Введите Логин!\" }],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tprefix={<Icon type='user' style={{ color: \"rgba(0,0,0,.25)\" }} />}\r\n\t\t\t\t\t\t\tplaceholder='Логин'\r\n\t\t\t\t\t\t/>,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item>\r\n\t\t\t\t\t{getFieldDecorator(\"password\", {\r\n\t\t\t\t\t\trules: [{ required: true, message: \"Введите пароль!\" }],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tprefix={<Icon type='lock' style={{ color: \"rgba(0,0,0,.25)\" }} />}\r\n\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\tplaceholder='Пароль'\r\n\t\t\t\t\t\t/>,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\thtmlType='submit'\r\n\t\t\t\t\t\tclassName='login-form-button'\r\n\t\t\t\t\t\tblock>\r\n\t\t\t\t\t\tВойти\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<center>\r\n\t\t\t\t\t\t<Link to='/register'>Зарегистрироваться</Link>\r\n\t\t\t\t\t</center>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nLogin.propTypes = {\r\n  handleLogin: PropTypes.func,\r\n  loading: PropTypes.bool\r\n}\r\n\r\nexport default Form.create({ name: 'login' })(Login)\r\n","const generateAvatar = (first, last) => {\r\n\tlet firstHash = 0\r\n\tlet lastHash = 0\r\n\tlet firstColor = \"#\"\r\n\tlet lastColor = \"#\"\r\n\tif (first.length) {\r\n\t\tfor (let i = 0; i < first.length; i++) {\r\n\t\t\tfirstHash = first.charCodeAt(i) + ((firstHash << 5) - firstHash)\r\n\t\t}\r\n\t\tfor (let i = 0; i < 3; i++) {\r\n\t\t\tconst value = (firstHash >> (i * 8)) & 0xff\r\n\t\t\tfirstColor += ('00' + value.toString(16)).substr(-2)\r\n\t\t}\r\n\t}\r\n\tif (last.length) {\r\n\t\tfor (let i = 0; i < last.length; i++) {\r\n\t\t\tlastHash = last.charCodeAt(i) + ((lastHash << 5) - lastHash)\r\n\t\t}\r\n\t\tfor (let i = 0; i < 3; i++) {\r\n\t\t\tconst valueLast = (lastHash >> (i * 8)) & 0xff\r\n\t\t\tlastColor += ('00' + valueLast.toString(16)).substr(-2)\r\n\t\t}\r\n  }\r\n  return { firstColor, lastColor }\r\n}\r\nexport default generateAvatar","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Menu, Dropdown, Icon, Button } from 'antd'\r\n\r\nimport { generateAvatar } from '../../utils'\r\nimport './style.scss'\r\n\r\nconst AuthInfo = props => {\r\n  const { auth, sendMessages, logout } = props\r\n  const { firstColor, lastColor } = generateAvatar(auth.firstName, auth.lastName)\r\n  const menu = (\r\n    <Menu>\r\n      <Menu.Item key=\"0\">\r\n        <a href=\"http://www.alipay.com/\">Профиль</a>\r\n\t\t\t</Menu.Item>\r\n\t\t\t<Menu.Divider />\r\n\t\t\t{auth.access >= 5 && \r\n\t\t\t\t<Menu.Item key=\"1\">\r\n\t\t\t\t\t<Button type='link'>Управление персоналом</Button>\r\n\t\t\t\t</Menu.Item>}\r\n      <Menu.Item key=\"2\">\r\n\t\t\t\t<Button type='link' onClick={() => {\r\n\t\t\t\t\tconst obj = {\r\n\t\t\t\t\t\ttitle: 'Новое уведомление',\r\n\t\t\t\t\t\tbody: 'Внесены изменения в графике работы'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsendMessages(obj)\r\n\t\t\t\t}}>Отправить уведомление</Button>\r\n      </Menu.Item>\r\n      <Menu.Divider />\r\n\t\t\t<Menu.Item key=\"3\">\r\n\t\t\t\t<Button type='link' onClick={()=>{logout()}}>Выйти</Button>\r\n\t\t\t</Menu.Item>\r\n    </Menu>\r\n  )\r\n  return (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tclassName='header__avatar'\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tbackground: `linear-gradient(135deg, ${firstColor} 0%, ${lastColor} 96%)`,\r\n\t\t\t\t}}>\r\n\t\t\t\t{auth.firstName.substr(0, 1)}\r\n\t\t\t\t{auth.lastName.substr(0, 1)}\r\n\t\t\t</div>\r\n\t\t\t<div className='header__name'>\r\n\t\t\t\t<Dropdown overlay={menu} trigger={[\"click\"]}>\r\n\t\t\t\t\t<span className='ant-dropdown-link'>\r\n\t\t\t\t\t\t{auth.lastName}. {auth.firstName.substr(0, 1)} <Icon type=\"down\" />\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</Dropdown>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nAuthInfo.propTypes = {\r\n\tauth: PropTypes.object,\r\n\tsendMessages: PropTypes.func,\r\n\tlogout: PropTypes.func\r\n}\r\n\r\nexport default AuthInfo\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Table as BaseTable } from 'antd'\r\n\r\nimport './style.scss'\r\nconst dayIsMonth = () => {\r\n  const d = new Date()\r\n  return 33 - new Date(d.getFullYear(), d.getMonth(), 33).getDate()\r\n}\r\nconst dayMonth = new Date()\r\nconst Table = props => {\r\n  \r\n  const days = dayIsMonth()\r\n  const { tableUser } = props\r\n  const day = () => {\r\n    const obj = []\r\n    for (let index = 0; index < days; index++) {\r\n      obj.push({\r\n        title: index + 1,\r\n        dataIndex: index + 1,\r\n        key: index + 1,\r\n        width: 50\r\n      })\r\n    }\r\n    return obj\r\n  }\r\n  const toDay = day()\r\n  console.log('toDay', toDay)\r\n  const column = [\r\n\t\t{\r\n\t\t\ttitle: \"ФИО\",\r\n\t\t\tdataIndex: \"FL\",\r\n\t\t\tkey: \"FL\",\r\n\t\t\twidth: 170,\r\n      fixed: \"left\",\r\n      align: 'center'\r\n    },\r\n    {\r\n      title: `График за ${dayMonth}`,\r\n      children: toDay\r\n    }\r\n  ]\r\n  const data = []\r\n  for (let i = 0; i < 18; i++) {\r\n    data.push({\r\n      key: i + 1,\r\n      FL: `Полищук Иван ${i}`,\r\n      1: `B`,\r\n      2: `10`,\r\n      10: `11`\r\n    })\r\n  }\r\n  return (\r\n    <div>\r\n      <BaseTable columns={column}\r\n        dataSource={data}\r\n        bordered\r\n        scroll={{ x: 'calc(700px + 50%)', y: 'calc(100vh - 270px)' }}\r\n      />\r\n      {tableUser}\r\n    </div>\r\n  )\r\n}\r\n\r\nTable.propTypes = {\r\n  tableUser: PropTypes.object\r\n}\r\n\r\nexport default Table\r\n","import React from 'react'\r\nimport md5 from 'md5'\r\nimport { connect } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport { AuthAction } from '../../redux/actions'\r\nimport { Register as BaseRegister } from '../../components'\r\n\r\nconst Register = props => {\r\n  const { loading, register } = props\r\n  const history = useHistory()\r\n  const click = async e => {\r\n    const form = e\r\n    const obj = {\r\n      login: form.login,\r\n      firstName: form.firstName,\r\n      lastName: form.lastName,\r\n      phone: form.phone,\r\n      password: md5(form.password),\r\n      access: 1,\r\n      smena: 0\r\n    }\r\n    const res = await register(obj)\r\n    if (res) history.push('/login')\r\n  }\r\n  return <BaseRegister handleClick={click} loading={loading} />\r\n}\r\n\r\nexport default connect(({Auth})=>({loading: Auth.isLoading}), {...AuthAction})(Register)","import React from 'react'\r\nimport md5 from 'md5'\r\nimport { connect } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport { Login as BaseLogin } from '../../components'\r\nimport { AuthAction } from '../../redux/actions'\r\n\r\nconst Login = props => {\r\n  const history = useHistory()\r\n  const { loading, login } = props\r\n  const logIn = async values => {\r\n    const obj = {\r\n      login: values.login,\r\n      password: md5(values.password)\r\n    }\r\n    const res = await login(obj)\r\n    if (res) history.push('/')\r\n  }\r\n  return (\r\n    <BaseLogin handleLogin={logIn} loading={loading} />\r\n  )\r\n}\r\n\r\nexport default connect(({Auth}) => ({loading: Auth.isLoading}), {...AuthAction})(Login)\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { Login, Register } from '../../containers'\r\nconst Auth = props => {\r\n  const { register, login } = props\r\n  \r\n  return (\r\n    <>\r\n      {register && <Register />}\r\n      {login && <Login />}\r\n    </>\r\n  )\r\n}\r\n\r\nAuth.propTypes = {\r\n  register: PropTypes.bool,\r\n  login: PropTypes.bool\r\n}\r\n\r\nexport default Auth\r\n","import React from \"react\"\r\nimport PropTypes from \"prop-types\"\r\nimport { connect } from 'react-redux'\r\n//import { withRouter } from 'react-router-dom'\r\n\r\nimport { AuthAction, NotifiAction } from '../../redux/actions'\r\nimport { AuthInfo, Loading, Table } from '../../components'\r\nimport \"./style.scss\"\r\n\r\nconst Home = props => {\r\n  const { access, auth, sendMessages, logout, loading } = props\r\n  //<div className='header__avatar' style={{background:`linear-gradient(135deg, ${firstColor} 0%, ${lastColor} 96%)`}}>ИП</div>\r\n\treturn (\r\n    <>{loading && <Loading />}\r\n      <header className='header'>\r\n        <div className='header__brand'>Монтировочный цех</div>\r\n        <div className=\"header__info\">\r\n          {access && auth && (<AuthInfo auth={auth} sendMessages={sendMessages} logout={logout} />)}\r\n        </div>\r\n      </header>\r\n      <section className='content'>\r\n        <Table />\r\n      </section>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nHome.propTypes = {\r\n  access: PropTypes.number,\r\n  loading: PropTypes.bool\r\n}\r\n\r\nexport default connect(({Auth}) => ({auth: Auth.items, loading: Auth.isLoading}), {...AuthAction, ...NotifiAction})(Home)\r\n","import React from 'react'\nimport { Switch, Route, Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport { Auth, Home } from './pages'\nimport { AuthAction } from './redux/actions'\n\nconst App = props => {\n\tconst { access } = props;\n\treturn (\n\t\t<div className='App'>\n\t\t\t<Switch>\n\t\t\t\t<Route\n\t\t\t\t\texact\n\t\t\t\t\tpath='/login'\n\t\t\t\t\trender={() => (!access ? <Auth login /> : <Redirect to='/' />)}\n\t\t\t\t/>\n\t\t\t\t<Route exact path='/register' render={() => <Auth register />} />\n\t\t\t\t<Route\n\t\t\t\t\texact\n\t\t\t\t\tpath='/'\n\t\t\t\t\trender={() =>\n\t\t\t\t\t\taccess && access >= 1 ? (\n\t\t\t\t\t\t\t<Home access={access} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Redirect to='/login' />\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</Switch>\n\t\t</div>\n\t);\n};\n\nexport default connect(({Auth}) => ({access: Auth.items.access}), {...AuthAction})(App)\n","const urlBase64ToUint8Array = base64String => {\r\n  const padding = \"=\".repeat((4 - base64String.length % 4) % 4)\r\n  // eslint-disable-next-line\r\n  const base64 = (base64String + padding).replace(/\\-/g, \"+\").replace(/_/g, \"/\")\r\n\r\n  const rawData = window.atob(base64)\r\n  const outputArray = new Uint8Array(rawData.length)\r\n\r\n  for (let i = 0; i < rawData.length; ++i) {\r\n    outputArray[i] = rawData.charCodeAt(i)\r\n  }\r\n  return outputArray\r\n}\r\n\r\nconst convertVapidKey = urlBase64ToUint8Array(process.env.REACT_APP_PUBLIC_VAPID_KEY)\r\n\r\nconst sendSubscribe = subscribe => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/notifications/subscribe`, {\r\n    method: 'POST',\r\n    body: JSON.stringify(subscribe),\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    }\r\n  })\r\n}\r\n\r\nexport const subscribeUser = async () => {\r\n  if ('serviceWorker' in navigator) {\r\n    const registration = await navigator.serviceWorker.ready\r\n    try {\r\n      if (!registration.pushManager) {\r\n        console.log('Пуш уведомления не активны!')\r\n        return\r\n      }\r\n      const existedSubscribe = await registration.pushManager.getSubscription()\r\n      if (existedSubscribe === null) {\r\n        console.log('Подписка не активирована, создаю запрос...')\r\n        const newSubscribe = await registration.pushManager.subscribe({\r\n          applicationServerKey: convertVapidKey,\r\n          userVisibleOnly: true\r\n        })\r\n        try {\r\n          console.log('Добавлена новая подписка...')\r\n          sendSubscribe(newSubscribe)\r\n        } catch (err) {\r\n          if (Notification.permission !== 'granted') {\r\n            console.log('Разрешение не было предоставленно')\r\n          } else {\r\n            console.log('В процессе подписки произошла ошибка!', err)\r\n          }\r\n        }\r\n      } else {\r\n        console.log('Обнаружена существующая подписка!')\r\n        sendSubscribe(existedSubscribe)\r\n      }\r\n    } catch (err) {\r\n      console.log('Произошла ошибка при регистрации сервисного работника!!!', err)\r\n    }\r\n  }\r\n}","const initialState = {\r\n  isLoading: null,\r\n  items: []\r\n}\r\n\r\nexport default (state = initialState, { type, payload }) => {\r\n  switch (type) {\r\n    case 'AUTH:LOGIN':\r\n      return {\r\n        ...state,\r\n        items: payload\r\n      }\r\n    case 'AUTH:IS_LOADING':\r\n      return {\r\n        ...state,\r\n        isLoading: payload\r\n      }\r\n    case 'AUTH:LOGOUT':\r\n      return {\r\n        ...state,\r\n        items:[]\r\n      }\r\n  \r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux'\r\n\r\nimport Auth from './auth'\r\n\r\nexport default combineReducers({\r\n  Auth,\r\n})","import { compose, applyMiddleware, createStore } from 'redux'\r\nimport thunk from 'redux-thunk'\r\n\r\nimport rootReducer from './reducer'\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nconst middleware = [thunk]\r\n\r\nconst store = createStore(rootReducer,\r\n  composeEnhancers(applyMiddleware(...middleware))\r\n)\r\n\r\nexport default store","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport jwtDecode from 'jwt-decode'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport 'antd/dist/antd.css'\nimport './index.scss'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nimport { subscribeUser } from './subscribe'\n\nimport store from './redux/store'\nimport { AuthAction } from './redux/actions'\nwindow.store = store\n\n/*Date.prototype.dayIsMonth = () => {\n  return 33 - new Date(this.getFullYear(), this.getMonth(), 33).getDate()\n}*/\n\nconst token = localStorage.getItem('token')\nif (token) {\n  const dec = jwtDecode(token)\n  if (dec.exp * 1000 > Date.now()) {\n    const data = dec.user[0]\n    const obj = {\n      login: data.login,\n      firstName: data.firstName,\n      lastName: data.lastName,\n      access: data.access,\n      smena: data.smena\n    }\n    store.dispatch(AuthAction._login(obj))\n  } else {\n    //localStorage.removeItem('token')\n    store.dispatch(AuthAction.logout())\n  }\n}\n\nReactDOM.render(<Provider store={store}><Router><App /></Router></Provider>, document.getElementById('root'))\n\n\nserviceWorker.register()\nsubscribeUser()\n"],"sourceRoot":""}